<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/js-visualize-components-samples/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/js-visualize-components-samples/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/js-visualize-components-samples/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Loading visualize.js</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Loading visualize.js" /> <meta property="og:locale" content="en_US" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Loading visualize.js" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Loading visualize.js","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/js-visualize-components-samples/assets/images/logo-white-tj.svg"}},"url":"/js-visualize-components-samples/pages/tools/loading-vizjs.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/js-visualize-components-samples/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <h2 class="site-subtitle">Visualize.js Components</h2> <p class="site-description"> Modern components for your embedded reporting workflows. </p> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/js-visualize-components-samples/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/js-visualize-components-samples/pages/introduction.html" class="nav-list-link">Introduction</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/js-visualize-components-samples/pages/input-controls/" class="nav-list-link">Input Controls</a><ul class="nav-list "><li class="nav-list-item "><a href="/js-visualize-components-samples/pages/input-controls/basic-usage.html" class="nav-list-link">Basic Usage</a></li><li class="nav-list-item "><a href="/js-visualize-components-samples/pages/input-controls/all-ics.html" class="nav-list-link">All Input Controls</a></li><li class="nav-list-item "><a href="/js-visualize-components-samples/pages/input-controls/events.html" class="nav-list-link">Events</a></li><li class="nav-list-item "><a href="/js-visualize-components-samples/pages/input-controls/override-styles.html" class="nav-list-link">Override Styles</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/js-visualize-components-samples/pages/tools/jv-tools.html" class="nav-list-link">jv-tools</a><ul class="nav-list "><li class="nav-list-item active"><a href="/js-visualize-components-samples/pages/tools/loading-vizjs.html" class="nav-list-link active">Loading visualize.js</a></li><li class="nav-list-item "><a href="/js-visualize-components-samples/pages/tools/visualize-types.html" class="nav-list-link">Visualize Types in TypeScript</a></li></ul></li><li class="nav-list-item"><a href="/js-visualize-components-samples/pages/architecture.html" class="nav-list-link">Architecture</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/js-visualize-components-samples/pages/tools/jv-tools.html">jv-tools</a></li> <li class="breadcrumb-nav-list-item"><span>Loading visualize.js</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h3 id="loading-visualizejs"> <a href="#loading-visualizejs" class="anchor-heading" aria-labelledby="loading-visualizejs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Loading visualize.js </h3> <p>This function works in a browser environment (assumes access to DOM), by dynamically inserting a script tag to load visualize.js. In your own code, when initializing your page, you can use this utility method to more easily load and store as you wish the visualize.js object.</p> <p>Alternatively, if you are already including visulize using a script tag on the page, it will be stored in a global scope and will simply be returned by this function.</p> <p>In a react based application, you can use the <code class="language-plaintext highlighter-rouge">useEffect</code> hook to handle this as in the example below.</p> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  
  <span class="kd">const</span> <span class="nx">credentials</span><span class="p">:</span> <span class="nx">Authentication</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">joeuser</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">joeuser</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">organization</span><span class="p">:</span> <span class="dl">"</span><span class="s2">organization_1</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="p">[</span><span class="nx">visualizeFactoryContainer</span><span class="p">,</span> <span class="nx">setVisualizeFactoryContainer</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span>
    <span class="kc">null</span> <span class="k">as</span> <span class="p">{</span> <span class="na">viz</span><span class="p">:</span> <span class="nx">VisualizeFactory</span> <span class="p">}</span> <span class="o">|</span> <span class="kc">null</span><span class="p">,</span>
  <span class="p">);</span>

  <span class="kd">const</span> <span class="p">[</span><span class="nx">vContainer</span><span class="p">,</span> <span class="nx">setVContainer</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span>
    <span class="kc">null</span> <span class="k">as</span> <span class="p">{</span> <span class="na">v</span><span class="p">:</span> <span class="nx">VisualizeType</span> <span class="p">}</span> <span class="o">|</span> <span class="kc">null</span><span class="p">,</span>
  <span class="p">);</span>

  <span class="kd">const</span> <span class="p">[</span><span class="nx">plugin</span><span class="p">,</span> <span class="nx">setPlugin</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="o">&lt;</span><span class="nx">InputControls</span><span class="o">&gt;</span><span class="p">();</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">loadVisualize</span> <span class="o">=</span> <span class="nx">visualizejsLoader</span><span class="p">(</span><span class="nx">visualizeUrl</span><span class="p">);</span>
    <span class="nx">loadVisualize</span><span class="p">().</span><span class="nx">then</span><span class="p">((</span><span class="na">visualizeFactory</span><span class="p">:</span> <span class="nx">VisualizeFactory</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">setVisualizeFactoryContainer</span><span class="p">({</span> <span class="na">viz</span><span class="p">:</span> <span class="nx">visualizeFactory</span> <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">credentials</span> <span class="o">&amp;&amp;</span> <span class="nx">visualizeFactoryContainer</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">new</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">VisualizeType</span><span class="o">&gt;</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">visualizeFactoryContainer</span><span class="p">.</span><span class="nx">viz</span><span class="p">(</span>
          <span class="p">{</span>
            <span class="na">auth</span><span class="p">:</span> <span class="p">{</span>
              <span class="na">name</span><span class="p">:</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
              <span class="na">password</span><span class="p">:</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">password</span><span class="p">,</span>
              <span class="na">organization</span><span class="p">:</span> <span class="nx">credentials</span><span class="p">.</span><span class="nx">organization</span> <span class="o">||</span> <span class="kc">null</span><span class="p">,</span>
              <span class="na">locale</span><span class="p">:</span> <span class="dl">"</span><span class="s2">en_US</span><span class="dl">"</span><span class="p">,</span>
            <span class="p">},</span>
          <span class="p">},</span>
          <span class="nx">resolve</span><span class="p">,</span>
          <span class="nx">reject</span><span class="p">,</span>
        <span class="p">);</span>
      <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="na">v</span><span class="p">:</span> <span class="nx">VisualizeType</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">setVContainer</span><span class="p">({</span> <span class="nx">v</span> <span class="p">});</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="na">e</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">e</span><span class="p">));</span>
        <span class="p">});</span> 
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">visualizeFactoryContainer</span><span class="p">]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">vContainer</span> <span class="o">&amp;&amp;</span> <span class="nx">setPlugin</span><span class="p">(</span><span class="k">new</span> <span class="nx">InputControls</span><span class="p">(</span><span class="nx">vContainer</span><span class="p">.</span><span class="nx">v</span><span class="p">));</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">vContainer</span><span class="p">]);</span>

</code></pre></div></div> <p>In this sample, we eventually set vContainer which has one property, v, containing what is called the <strong>V Object</strong>, which can be used across several of the visualize components.</p> </div> </div> </div> </body> </html>
